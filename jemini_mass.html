<!doctype html>
<html lang="ko">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë§ˆì‚¬ì§€ìƒµ ê´€ë¦¬ ì‹œìŠ¤í…œ (Supabase DB ì—°ë™) - V11.0</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&amp;family=Noto+Sans+Thai:wght@300;400;500;700&amp;family=Noto+Sans+Vietnamese:wght@300;400;500;700&amp;family=Roboto:wght@300;400;500;700&amp;family=Nanum+Gothic:wght@400;700;800&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            font-size: 16px;
        }
        .remaining-time {
            font-size: 2rem;
            font-weight: bold;
            color: #ef4444;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 700px;
            max-height: 90%;
            overflow-y: auto;
        }
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        .menu-selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        .duration-selection-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 10px 0;
        }
        .selection-item {
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .selection-item:hover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .selection-item.selected {
            border-color: #3b82f6;
            background-color: #3b82f6;
            color: white;
        }
        .edit-row {
            background-color: #f3f4f6;
        }
        .selected-staff-info {
            background-color: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .menu-row {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .required-label::after {
            content: " *";
            color: red;
            font-weight: bold;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="bg-gray-100 min-h-full"><div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600">
   <div class="bg-white p-8 rounded-lg shadow-2xl w-full max-w-md">
    <div class="text-center mb-8">
     <h1 class="text-3xl font-bold text-gray-800" data-translate="title">ë§ˆì‚¬ì§€ìƒµ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
     <div class="w-20 h-1 bg-blue-500 mx-auto"></div>
    </div><div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2" data-translate="languageSelection">ì–¸ì–´ ì„ íƒ / Language / Bahasa / NgÃ´n ngá»¯</label>
     <div class="grid grid-cols-4 gap-2">
      <button onclick="setLanguageAndClose('ko')" class="bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600" id="langKo">í•œêµ­ì–´</button> 
      <button onclick="setLanguageAndClose('en')" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" id="langEn">English</button> 
      <button onclick="setLanguageAndClose('th')" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" id="langTh">à¹„à¸—à¸¢</button> 
      <button onclick="setLanguageAndClose('vi')" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" id="langVi">Tiáº¿ng Viá»‡t</button>
     </div>
    </div>
    <div class="space-y-4">
     <div><label class="block text-sm font-medium text-gray-700 mb-2" data-translate="username">ì•„ì´ë”” (ì´ë©”ì¼)</label> <input type="text" id="loginUsername" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" data-translate-placeholder="usernameInput" placeholder="Supabase ì¸ì¦ ì´ë©”ì¼">
     </div>
     <div><label class="block text-sm font-medium text-gray-700 mb-2" data-translate="password">ë¹„ë°€ë²ˆí˜¸</label> <input type="password" id="loginPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" data-translate-placeholder="passwordInput" placeholder="Supabase ì¸ì¦ ë¹„ë°€ë²ˆí˜¸">
     </div><button onclick="processLogin()" class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-200" data-translate="login">ë¡œê·¸ì¸</button>
    </div>
   </div>
  </div><div id="mainScreen" class="container mx-auto p-6" style="display: none;"><div class="bg-white rounded-lg shadow-md p-6 mb-6">
    <div class="flex justify-between items-center mb-4">
     <div>
      <h1 class="text-3xl font-bold text-gray-800" data-translate="title">ë§ˆì‚¬ì§€ ê´€ë¦¬ í”„ë¡œê·¸ë¨</h1>
      <p id="shopName" class="text-lg text-gray-600 mt-1">Supabase DB ì—°ë™ í™”ë©´</p>
     </div>
     <div class="flex gap-2"><button onclick="showLanguageModal()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600" data-translate="changeLanguage">ì–¸ì–´ ë³€ê²½</button> <button onclick="showFontModal()" class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600" data-translate="changeFont">í°íŠ¸ ë³€ê²½</button> <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600" data-translate="logout">ë¡œê·¸ì•„ì›ƒ</button>
     </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
     <div class="text-center"><label class="block text-sm font-medium mb-2" data-translate="todayDate">ì˜¤ëŠ˜ ë‚ ì§œ</label>
      <div class="flex gap-2"><input type="date" id="currentDate" class="border rounded px-3 py-2 flex-1"> <button onclick="confirmDateChange()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600" data-translate="confirmDate">í™•ì¸</button>
      </div>
     </div>
     <div class="text-center"><label class="block text-sm font-medium mb-2" data-translate="currentTime">í˜„ì¬ ì‹œê°„</label>
      <div id="currentTime" class="text-xl font-bold text-blue-600"></div>
     </div>
    </div>
   </div><div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><button onclick="showDashboard()" class="bg-blue-500 text-white py-4 px-6 rounded-lg text-lg hover:bg-blue-600" data-translate="dashboard">í˜„í™©íŒ</button> <button onclick="showOrder()" class="bg-indigo-500 text-white py-4 px-6 rounded-lg text-lg hover:bg-indigo-600" data-translate="order">ìˆœë²ˆ</button> <button onclick="showReservation()" class="bg-green-500 text-white py-4 px-6 rounded-lg text-lg hover:bg-green-600" data-translate="reservation">ì˜ˆì•½</button> <button onclick="showStatistics()" class="bg-purple-500 text-white py-4 px-6 rounded-lg text-lg hover:bg-purple-600" data-translate="statistics">í†µê³„</button> <button onclick="showDBManagement()" id="dbManagementButton" class="bg-orange-500 text-white py-4 px-6 rounded-lg text-lg hover:bg-orange-600" data-translate="dbManagement">DB ê´€ë¦¬</button>
   </div><div id="orderSection" class="bg-white rounded-lg shadow-md p-6" style="display: none;">
    <h2 class="text-2xl font-bold mb-4" data-translate="orderManagement">ìˆœë²ˆ ê´€ë¦¬</h2>
    <div class="mb-4"><button onclick="saveStaffOrder()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600" data-translate="saveOrder">ìˆœë²ˆ ì €ì¥</button>
    </div>
    <div class="overflow-x-auto">
     <table class="w-full border-collapse border border-gray-300">
      <thead>
       <tr class="bg-gray-100">
        <th class="border border-gray-300 p-2" data-translate="staffName">ì§ì›ëª…</th>
        <th class="border border-gray-300 p-2" data-translate="status">ìƒíƒœ</th>
        <th class="border border-gray-300 p-2" data-translate="orderNumber">ìˆœë²ˆ</th>
       </tr>
      </thead>
      <tbody id="orderTable">
      </tbody>
     </table>
    </div>
    <div class="mt-4 text-sm text-gray-600" data-translate="orderZeroVacationNote">
     * ìˆœë²ˆ 0ì€ íœ´ê°€ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
    </div>
   </div><div id="dashboardSection" class="bg-white rounded-lg shadow-md p-6" style="display: none;">
    <h2 class="text-2xl font-bold mb-4" data-translate="dashboard">í˜„í™©íŒ</h2>
    <div class="overflow-x-auto">
     <table class="w-full border-collapse border border-gray-300">
      <thead>
       <tr class="bg-gray-100">
        <th class="border border-gray-300 p-2" data-translate="staff">ì§ì›ëª…</th>
        <th class="border border-gray-300 p-2" data-translate="menu">ë©”ë‰´</th>
        <th class="border border-gray-300 p-2" data-translate="duration">ì‹œê°„</th>
        <th class="border border-gray-300 p-2" data-translate="startTime">ì‹œì‘ì‹œê°„</th>
        <th class="border border-gray-300 p-2" data-translate="endTime">ëì‹œê°„</th>
        <th class="border border-gray-300 p-2" data-translate="remainingTime">ë‚¨ì€ì‹œê°„</th>
        <th class="border border-gray-300 p-2" data-translate="price">ê°€ê²©</th>
        <th class="border border-gray-300 p-2" data-translate="commission">ì»¤ë¯¸ì…˜</th>
        <th class="border border-gray-300 p-2" data-translate="roomNumber">ë°©ë²ˆí˜¸</th>
        <th class="border border-gray-300 p-2" data-translate="actions">ì‘ì—…</th>
       </tr>
      </thead>
      <tbody id="dashboardTable">
      </tbody>
     </table>
    </div>
   </div><div id="reservationSection" class="bg-white rounded-lg shadow-md p-6" style="display: none;">
    <h2 class="text-2xl font-bold mb-4" data-translate="reservation">ì˜ˆì•½</h2><div class="mb-6"><label class="block text-sm font-medium mb-2 required-label" data-translate="selectStaff">ì§ì› ì„ íƒ</label>
     <div id="staffSelectionContainer">
      <div id="staffSelection" class="selection-grid"></div>
      <div id="selectedStaffInfo" class="selected-staff-info" style="display: none;">
       <div class="flex justify-between items-center">
        <div>
         <h4 class="font-bold text-lg">ì„ íƒëœ ì§ì›: <span id="selectedStaffName"></span></h4>
         <p class="text-sm text-gray-600">ìˆœë²ˆ: <span id="selectedStaffOrder"></span></p>
        </div><button onclick="changeStaff()" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">ì§ì› ë³€ê²½</button>
       </div>
      </div>
     </div>
    </div><div id="menuListContainer" style="display: none;">
     <div class="flex justify-between items-center mb-4"><label class="block text-sm font-medium required-label">ë©”ë‰´ ëª©ë¡</label> <button onclick="addMenuRow()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 flex items-center gap-2"> <span class="text-lg">+</span> ë©”ë‰´ ì¶”ê°€ </button>
     </div>
     <div id="menuRows"></div><div class="mt-6 p-4 bg-gray-100 rounded">
      <div class="grid grid-cols-2 gap-4">
       <div>
        <strong data-translate="totalPrice">ì´ ê°€ê²©:</strong> <span id="totalPrice">0</span><span id="totalPriceCurrency"></span>
       </div>
       <div>
        <strong data-translate="totalCommission">ì´ ì»¤ë¯¸ì…˜:</strong> <span id="totalCommission">0</span><span id="totalCommissionCurrency"></span>
       </div>
      </div>
     </div><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
      <div><label class="block text-sm font-medium mb-2" data-translate="startTime">ì‹œì‘ ì‹œê°„ (ì„ íƒì‚¬í•­)</label> <input type="time" id="reservationStartTime" class="w-full border rounded px-3 py-2" onchange="updateAllMenuTimes()">
      </div>
      <div><label class="block text-sm font-medium mb-2" data-translate="roomNumber">ë°©ë²ˆí˜¸ (ì„ íƒì‚¬í•­)</label> <select id="reservationRoom" class="w-full border rounded px-3 py-2"> <option value="" data-translate="selectRoom">ë°© ì„ íƒ</option> </select>
      </div>
      <div><label class="block text-sm font-medium mb-2" data-translate="customerName">ê³ ê°ëª… (ì„ íƒì‚¬í•­)</label> <input type="text" id="reservationCustomer" class="w-full border rounded px-3 py-2" data-translate-placeholder="enterCustomerName">
      </div>
     </div><div id="menuTimeSettings" class="mt-6" style="display: none;">
      <h4 class="font-bold mb-3">ë©”ë‰´ë³„ ì‹œê°„ ì„¤ì •</h4>
      <div id="menuTimeList" class="space-y-3">
      </div>
     </div><button onclick="addReservation()" class="mt-6 bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600" data-translate="addReservation">ì˜ˆì•½ ì¶”ê°€</button>
    </div>
   </div><div id="statisticsSection" class="bg-white rounded-lg shadow-md p-6" style="display: none;">
    <h2 class="text-2xl font-bold mb-4" data-translate="statistics">í†µê³„</h2>
    <div class="mb-4 flex gap-4 flex-wrap"><button onclick="showDailyStats()" id="dailyStatsBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600" data-translate="daily">ì¼ê°„</button> <button onclick="showWeeklyStats()" id="weeklyStatsBtn" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400" data-translate="weekly">ì£¼ê°„</button> <button onclick="showMonthlyStats()" id="monthlyStatsBtn" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400" data-translate="monthly">ì›”ê°„</button> <button onclick="showMenuSales()" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600" data-translate="monthlyMenuSales">ì›”ê°„ ë©”ë‰´ ë§¤ì¶œ</button> <button onclick="showMonthlySalesChart()" class="bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600" data-translate="monthlySalesChart">ì›”ê°„ ë§¤ì¶œ ê·¸ë˜í”„</button> <button onclick="downloadExcel()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700" data-translate="download">ë‹¤ìš´ë¡œë“œ</button>
    </div><div class="mb-6 p-4 bg-gray-50 rounded"><div id="dailyDateSelection" class="mb-4"><label class="block text-sm font-medium mb-2" data-translate="selectDate">ë‚ ì§œ ì„ íƒ</label> <input type="date" id="statsDate" class="border rounded px-3 py-2" onchange="updateStats()">
     </div><div id="rangeDateSelection" class="grid grid-cols-1 md:grid-cols-2 gap-4" style="display: none;">
      <div><label class="block text-sm font-medium mb-2" data-translate="startDate">ì‹œì‘ ë‚ ì§œ</label> <input type="date" id="statsStartDate" class="w-full border rounded px-3 py-2" onchange="autoSetEndDate()">
      </div>
      <div><label class="block text-sm font-medium mb-2" data-translate="endDate">ë ë‚ ì§œ</label> <input type="date" id="statsEndDate" class="w-full border rounded px-3 py-2" onchange="updateStats()">
      </div>
     </div><div id="quickDateSelection" class="mt-3 flex gap-2 flex-wrap" style="display: none;"><button onclick="setThisWeek()" class="bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm hover:bg-blue-200" data-translate="thisWeek">ì´ë²ˆ ì£¼</button> <button onclick="setLastWeek()" class="bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm hover:bg-blue-200" data-translate="lastWeek">ì§€ë‚œ ì£¼</button> <button onclick="setThisMonth()" class="bg-green-100 text-green-700 px-3 py-1 rounded text-sm hover:bg-green-200" data-translate="thisMonth">ì´ë²ˆ ë‹¬</button> <button onclick="setLastMonth()" class="bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200" data-translate="lastMonth">ì§€ë‚œ ë‹¬</button>
     </div>
    </div><div id="chartContainer" class="mb-6" style="display: none;">
     <canvas id="statsChart" width="800" height="400"></canvas>
    </div><div class="mb-6">
     <h3 class="text-lg font-bold mb-2" data-translate="staffStatisticsTitle">ì§ì›ë³„ í†µê³„</h3>
     <div class="overflow-x-auto">
      <table class="w-full border-collapse border border-gray-300">
       <thead>
        <tr class="bg-gray-100">
         <th class="border border-gray-300 p-2" data-translate="staff">ë§ˆì‚¬ì§€ì‚¬</th>
         <th class="border border-gray-300 p-2" data-translate="totalPrice">ì´ ê°€ê²©</th>
         <th class="border border-gray-300 p-2" data-translate="totalCommission">ì´ ì»¤ë¯¸ì…˜</th>
        </tr>
       </thead>
       <tbody id="statsTable">
       </tbody>
      </table>
     </div>
    </div><div class="mb-6">
     <h3 class="text-lg font-bold mb-2" data-translate="paymentMethodStatisticsTitle">ì…ê¸ˆë°©ì‹ë³„ í†µê³„</h3>
     <div class="overflow-x-auto">
      <table class="w-full border-collapse border border-gray-300">
       <thead>
        <tr class="bg-gray-100">
         <th class="border border-gray-300 p-2" data-translate="paymentMethodColumn">ì…ê¸ˆë°©ì‹</th>
         <th class="border border-gray-300 p-2" data-translate="amountColumn">ê¸ˆì•¡</th>
        </tr>
       </thead>
       <tbody id="paymentStatsTable">
       </tbody>
      </table>
     </div>
    </div>
    <div class="p-4 bg-gray-100 rounded">
     <div class="grid grid-cols-3 gap-4">
      <div>
       <strong data-translate="grandTotal">ì´ ê¸ˆì•¡(QRíŒ ì œì™¸):</strong> <span id="grandTotalPrice">0</span><span id="grandTotalCurrency"></span>
      </div>
      <div>
       <strong data-translate="grandTotalCommission">ì´ ì»¤ë¯¸ì…˜:</strong> <span id="grandTotalCommission">0</span><span id="grandTotalCommissionCurrency"></span>
      </div>
      <div>
       <strong data-translate="profit">ìˆ˜ìµ:</strong> <span id="totalProfit">0</span><span id="totalProfitCurrency"></span>
      </div>
     </div>
    </div>
   </div><div id="dbManagementSection" class="bg-white rounded-lg shadow-md p-6" style="display: none;">
    <h2 class="text-2xl font-bold mb-4" data-translate="dbManagement">DB ê´€ë¦¬</h2><div class="mb-6 p-4 bg-gray-100 rounded">
     <h3 class="text-lg font-bold mb-2" data-translate="dataBackupRestoreTitle">ë°ì´í„° ë°±ì—… ë° ë³µì›</h3>
     <div class="grid grid-cols-2 gap-4">
      <div>
       <h4 class="font-semibold mb-2" data-translate="backupButton">ë°±ì—…</h4>
       <div class="flex gap-2 flex-wrap"><button onclick="exportAllDataJSON()" class="bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700 text-sm" data-translate="localBackupButton">ë¡œì»¬ ë°±ì—… (JSON)</button> <button onclick="alert('êµ¬ê¸€ ë°±ì—… ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.')" class="bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 text-sm" data-translate="googleBackupButton">êµ¬ê¸€ ë°±ì—…</button>
       </div>
      </div>
      <div>
       <h4 class="font-semibold mb-2" data-translate="restoreButton">ë³µì›</h4>
       <div class="flex gap-2 flex-wrap"><input type="file" id="restoreFile" accept=".json" style="display: none;" onchange="restoreData(event)"> <button onclick="document.getElementById('restoreFile').click()" class="bg-orange-600 text-white px-3 py-2 rounded hover:bg-orange-700 text-sm" data-translate="localRestoreButton">ë¡œì»¬ ë³µì› (JSON)</button> <button onclick="alert('êµ¬ê¸€ ë³µì› ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.')" class="bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 text-sm" data-translate="googleRestoreButton">êµ¬ê¸€ ë³µì›</button>
       </div>
      </div>
     </div>
     <div class="mt-4"><button onclick="exportAllDataExcel()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700" data-translate="exportAllDataButton">ì „ì²´ ë°ì´í„° ì—‘ì…€ ë‚´ë³´ë‚´ê¸°</button>
     </div>
    </div>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4"><button onclick="manageMenus()" class="bg-blue-500 text-white py-3 px-4 rounded hover:bg-blue-600" data-translate="menuManagement">ë©”ë‰´ ê´€ë¦¬</button> <button onclick="manageStaff()" class="bg-green-500 text-white py-3 px-4 rounded hover:bg-green-600" data-translate="staffManagement">ì§ì› ê´€ë¦¬</button> <button onclick="manageRooms()" class="bg-purple-500 text-white py-3 px-4 rounded hover:bg-purple-600" data-translate="roomManagement">ë°© ê´€ë¦¬</button> <button onclick="manageCustomers()" class="bg-orange-500 text-white py-3 px-4 rounded hover:bg-orange-600" data-translate="customerManagement">ê³ ê° ê´€ë¦¬</button> <button onclick="manageCurrency()" class="bg-pink-500 text-white py-3 px-4 rounded hover:bg-pink-600" data-translate="currencyManagement">í™”í ë‹¨ìœ„</button> <button onclick="managePaymentMethods()" class="bg-yellow-500 text-white py-3 px-4 rounded hover:bg-yellow-600" data-translate="paymentMethodManagement">ì…ê¸ˆë°©ì‹ ê´€ë¦¬</button> <button onclick="manageGuarantee()" class="bg-teal-500 text-white py-3 px-4 rounded hover:bg-teal-600">Guarantee ê´€ë¦¬</button>
     <div id="superAdminButtons" style="display: block;"><button onclick="manageAdmins()" class="bg-red-500 text-white py-3 px-4 rounded hover:bg-red-600" data-translate="adminManagement">ê´€ë¦¬ì ê´€ë¦¬</button>
     </div>
    </div>
   </div>
  </div><div id="paymentModal" class="modal">
   <div class="modal-content">
    <h3 class="text-xl font-bold mb-4" data-translate="payment">ì…ê¸ˆ ì²˜ë¦¬</h3>
    <div id="paymentMethods" class="space-y-4 mb-4">
    </div>
    <div class="mb-4"><strong data-translate="totalAmount">ì´ ê¸ˆì•¡:</strong> <span id="paymentTotalAmount">0</span><span id="paymentCurrency"></span>
    </div>
    <div class="mb-4"><strong data-translate="enteredAmount">ì…ë ¥ëœ ê¸ˆì•¡:</strong> <span id="paymentEnteredAmount">0</span><span id="paymentEnteredCurrency"></span>
    </div>
    <div class="flex gap-2"><button onclick="processPayment()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" data-translate="confirm">í™•ì¸</button> <button onclick="closePaymentModal()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600" data-translate="cancel">ì·¨ì†Œ</button>
    </div>
   </div>
  </div><div id="managementModal" class="modal">
   <div class="modal-content">
    <h3 id="managementTitle" class="text-xl font-bold mb-4"></h3>
    <div id="managementContent"></div><button onclick="closeManagementModal()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600" data-translate="close">ë‹«ê¸°</button>
   </div>
  </div><div id="languageModal" class="modal">
   <div class="modal-content">
    <h3 class="text-xl font-bold mb-4" data-translate="languageSelection">ì–¸ì–´ ì„ íƒ / Language / Bahasa / NgÃ´n ngá»¯</h3>
    <div class="grid grid-cols-2 gap-4">
      <button onclick="setLanguageAndClose('ko')" class="bg-blue-500 text-white py-3 px-4 rounded hover:bg-blue-600">í•œêµ­ì–´</button> 
      <button onclick="setLanguageAndClose('en')" class="bg-blue-500 text-white py-3 px-4 rounded hover:bg-blue-600">English</button> 
      <button onclick="setLanguageAndClose('th')" class="bg-blue-500 text-white py-3 px-4 rounded hover:bg-blue-600">à¹„à¸—à¸¢</button> 
      <button onclick="setLanguageAndClose('vi')" class="bg-blue-500 text-white py-3 px-4 rounded hover:bg-blue-600">Tiáº¿ng Viá»‡t</button>
    </div>
    <button onclick="closeLanguageModal()" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600" data-translate="close">ë‹«ê¸°</button>
   </div>
  </div><div id="fontModal" class="modal">
   <div class="modal-content">
    <h3 class="text-xl font-bold mb-4" data-translate="fontSelection">í°íŠ¸ ì„ íƒ</h3><div class="mb-6 p-4 bg-gray-50 rounded">
     <h4 class="font-bold mb-3" data-translate="fontSize">í°íŠ¸ í¬ê¸°</h4>
     <div class="grid grid-cols-5 gap-2"><button onclick="setFontSize('small')" id="fontSizeSmall" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" data-translate="fontSizeSmall">ì‘ê²Œ</button> <button onclick="setFontSize('normal')" id="fontSizeNormal" class="bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600" data-translate="fontSizeNormal">ë³´í†µ</button> <button onclick="setFontSize('large')" id="fontSizeLarge" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" data-translate="fontSizeLarge">í¬ê²Œ</button> <button onclick="setFontSize('xlarge')" id="fontSizeXLarge" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" data-translate="fontSizeXLarge">ë§¤ìš° í¬ê²Œ</button> <button onclick="setFontSize('xxlarge')" id="fontSizeXXLarge" class="bg-gray-300 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-400" data-translate="fontSizeXXLarge">ìµœëŒ€</button>
     </div>
     <div class="mt-2 text-sm text-gray-600" data-translate="fontSizePreview"><span id="fontSizePreview">ë¯¸ë¦¬ë³´ê¸° í…ìŠ¤íŠ¸ - Preview Text - à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ - VÄƒn báº£n xem trÆ°á»›c</span>
     </div>
    </div><div class="mb-4">
     <h4 class="font-bold mb-3" data-translate="fontFamily">í°íŠ¸ ì¢…ë¥˜</h4>
     <div class="grid grid-cols-1 gap-3"><button onclick="setFontFamily('Arial')" id="fontFamilyArial" class="bg-blue-500 text-white py-3 px-4 rounded hover:bg-blue-600" style="font-family: Arial;">Arial (ê¸°ë³¸)</button> <button onclick="setFontFamily('Noto Sans KR')" id="fontFamilyNotoKR" class="bg-gray-300 text-gray-700 py-3 px-4 rounded hover:bg-gray-400" style="font-family: 'Noto Sans KR', sans-serif;">Noto Sans KR (í•œê¸€ ìµœì í™”)</button> <button onclick="setFontFamily('Malgun Gothic')" id="fontFamilyMalgun" class="bg-gray-300 text-gray-700 py-3 px-4 rounded hover:bg-gray-400" style="font-family: 'Malgun Gothic', sans-serif;">ë§‘ì€ ê³ ë”•</button> <button onclick="setFontFamily('Nanum Gothic')" id="fontFamilyNanum" class="bg-gray-300 text-gray-700 py-3 px-4 rounded hover:bg-gray-400" style="font-family: 'Nanum Gothic', sans-serif;">ë‚˜ëˆ”ê³ ë”•</button> <button onclick="setFontFamily('Roboto')" id="fontFamilyRoboto" class="bg-gray-300 text-gray-700 py-3 px-4 rounded hover:bg-gray-400" style="font-family: 'Roboto', sans-serif;">Roboto (ì˜ë¬¸ ìµœì í™”)</button> <button onclick="setFontFamily('Noto Sans Thai')" id="fontFamilyThai" class="bg-gray-300 text-gray-700 py-3 px-4 rounded hover:bg-gray-400" style="font-family: 'Noto Sans Thai', sans-serif;">Noto Sans Thai (íƒœêµ­ì–´)</button> <button onclick="setFontFamily('Noto Sans Vietnamese')" id="fontFamilyVietnamese" class="bg-gray-300 text-gray-700 py-3 px-4 rounded hover:bg-gray-400" style="font-family: 'Noto Sans Vietnamese', sans-serif;">Noto Sans Vietnamese (ë² íŠ¸ë‚¨ì–´)</button>
     </div>
    </div>
    <div class="flex gap-2"><button onclick="applyFontSettings()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" data-translate="apply">ì ìš©</button> <button onclick="closeFontModal()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600" data-translate="close">ë‹«ê¸°</button>
    </div>
   </div>
  </div><div id="googleLoginModal" class="modal">
   <div class="modal-content">
    <h3 class="text-xl font-bold mb-4">êµ¬ê¸€ ê³„ì • ë¡œê·¸ì¸</h3>
    <div class="space-y-4">
     <div><label class="block text-sm font-medium mb-2">êµ¬ê¸€ ì´ë©”ì¼:</label> <input type="email" id="googleEmail" class="w-full border rounded px-3 py-2" placeholder="example@gmail.com">
     </div>
     <div><label class="block text-sm font-medium mb-2">êµ¬ê¸€ ë¹„ë°€ë²ˆí˜¸:</label> <input type="password" id="googlePassword" class="w-full border rounded px-3 py-2" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
     </div>
     <div class="text-sm text-gray-600">
      * ì‹¤ì œ êµ¬ê¸€ ê³„ì • ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ë°±ì—…/ë³µì›ì„ ìœ„í•´ êµ¬ê¸€ ë“œë¼ì´ë¸Œì— ì ‘ê·¼í•©ë‹ˆë‹¤.
     </div>
    </div>
    <div class="flex gap-2 mt-4"><button id="googleLoginConfirm" onclick="processGoogleLogin()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ë¡œê·¸ì¸</button> <button onclick="closeGoogleLoginModal()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">ì·¨ì†Œ</button>
    </div>
   </div>
  </div>
  <script>
        // =========================================================================
        // V11.0: Supabase Client & Constants (DB ì–¸ì–´ ë°ì´í„° êµ¬ì¡° ë°˜ì˜ ë° ë²„ê·¸ ìˆ˜ì •)
        // =========================================================================
        const SUPABASE_URL = 'https://requjozkxlxomoamdrrf.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlcXVqb3preGx4b21vYW1kcnJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMDM1NjYsImV4cCI6MjA3ODg3OTU2Nn0.LpZyM2K12EShRAZyptk6Ak2XDkxQ-WuUPklTZfqt_Tg';

        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        console.log('Supabase Client Initialized! (V11.0)');
        
        const ADMIN_ROLES = {
            SUPER_USER: 'ìµœê³ ê´€ë¦¬ì',
            SHOP_MANAGER: 'ìƒ¾ê´€ë¦¬ì',
            SHOP_STAFF: 'ìƒ¾ì§ì›'
        };

        // =========================================================================
        // 2. ì „ì—­ ë³€ìˆ˜ ë° ë²ˆì—­ (Translation & Roles)
        // =========================================================================
        let currentLanguage = 'ko';
        let currentFont = 'Arial';
        let currentFontSize = 'normal';
        let selectedFontFamily = 'Arial';
        let selectedFontSize = 'normal';
        let currentAdmin = { 
            id: null,
            username: null,
            type: ADMIN_ROLES.SUPER_USER, // ğŸš¨ ë¬´ì¡°ê±´ ìµœê³ ê´€ë¦¬ì ê¶Œí•œ ê°•ì œ ì„¤ì • (UI í‘œì‹œ ëª©ì )
            shopId: 'super', 
            shopName: 'ì‹œìŠ¤í…œ ì „ì²´ ê´€ë¦¬ (ê°•ì œ)' 
        };
        let currentPaymentReservationId = null;
        let selectedStaff = null;
        let menuRowCounter = 0;
        let menuRows = [];
        let currency = { symbol: 'â‚©', name: 'ì›' }; 
        let translations = {}; // ğŸš¨ V11.0: DBì—ì„œ ë¡œë“œí•˜ë„ë¡ ì´ˆê¸°í™”

        // V11.0: ì²¨ë¶€ëœ 'ë²ˆì—­ë°ì´íƒ€.txt' ê¸°ë°˜ì˜ ê¸°ë³¸ ì–¸ì–´ ë°ì´í„° (DB ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©)
        const defaultTranslations = {
            ko: {
                title: 'ë§ˆì‚¬ì§€ìƒµ ê´€ë¦¬ ì‹œìŠ¤í…œ', username: 'ì•„ì´ë”” (ì´ë©”ì¼)', password: 'ë¹„ë°€ë²ˆí˜¸', login: 'ë¡œê·¸ì¸', usernameInput: 'Supabase ì¸ì¦ ì´ë©”ì¼', passwordInput: 'Supabase ì¸ì¦ ë¹„ë°€ë²ˆí˜¸',
                changeLanguage: 'ì–¸ì–´ ë³€ê²½', changeFont: 'í°íŠ¸ ë³€ê²½', logout: 'ë¡œê·¸ì•„ì›ƒ', languageSelection: 'ì–¸ì–´ ì„ íƒ',
                todayDate: 'ì˜¤ëŠ˜ ë‚ ì§œ', currentTime: 'í˜„ì¬ ì‹œê°„', confirmDate: 'í™•ì¸',
                dashboard: 'í˜„í™©íŒ', order: 'ìˆœë²ˆ', reservation: 'ì˜ˆì•½', statistics: 'í†µê³„', dbManagement: 'DB ê´€ë¦¬',
                orderManagement: 'ìˆœë²ˆ ê´€ë¦¬', saveOrder: 'ìˆœë²ˆ ì €ì¥', staffName: 'ì§ì›ëª…', status: 'ìƒíƒœ', orderNumber: 'ìˆœë²ˆ', orderZeroVacationNote: '* ìˆœë²ˆ 0ì€ íœ´ê°€ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.',
                staff: 'ì§ì›ëª…', menu: 'ë©”ë‰´', duration: 'ì‹œê°„', startTime: 'ì‹œì‘ì‹œê°„', endTime: 'ëì‹œê°„', remainingTime: 'ë‚¨ì€ì‹œê°„', price: 'ê°€ê²©', commission: 'ì»¤ë¯¸ì…˜', roomNumber: 'ë°©ë²ˆí˜¸', actions: 'ì‘ì—…',
                paymentCompleteStatus: 'ì…ê¸ˆ ì™„ë£Œ', edit: 'ìˆ˜ì •', payment: 'ì…ê¸ˆ', delete: 'ì‚­ì œ',
                selectStaff: 'ì§ì› ì„ íƒ', selectRoom: 'ë°© ì„ íƒ', customerName: 'ê³ ê°ëª… (ì„ íƒì‚¬í•­)', enterCustomerName: 'ê³ ê°ëª… ì…ë ¥', addReservation: 'ì˜ˆì•½ ì¶”ê°€',
                totalPrice: 'ì´ ê°€ê²©', totalCommission: 'ì´ ì»¤ë¯¸ì…˜',
                payment: 'ì…ê¸ˆ ì²˜ë¦¬', totalAmount: 'ì´ ê¸ˆì•¡', enteredAmount: 'ì…ë ¥ëœ ê¸ˆì•¡', confirm: 'í™•ì¸', cancel: 'ì·¨ì†Œ', close: 'ë‹«ê¸°',
                menuManagement: 'ë©”ë‰´ ê´€ë¦¬', staffManagement: 'ì§ì› ê´€ë¦¬', roomManagement: 'ë°© ê´€ë¦¬', currencyManagement: 'í™”í ë‹¨ìœ„', paymentMethodManagement: 'ì…ê¸ˆë°©ì‹ ê´€ë¦¬', customerManagement: 'ê³ ê° ê´€ë¦¬', adminManagement: 'ê´€ë¦¬ì ê´€ë¦¬',
                daily: 'ì¼ê°„', weekly: 'ì£¼ê°„', monthly: 'ì›”ê°„', monthlyMenuSales: 'ì›”ê°„ ë©”ë‰´ ë§¤ì¶œ', monthlySalesChart: 'ì›”ê°„ ë§¤ì¶œ ê·¸ë˜í”„', download: 'ë‹¤ìš´ë¡œë“œ',
                selectDate: 'ë‚ ì§œ ì„ íƒ', startDate: 'ì‹œì‘ ë‚ ì§œ', endDate: 'ë ë‚ ì§œ', thisWeek: 'ì´ë²ˆ ì£¼', lastWeek: 'ì§€ë‚œ ì£¼', thisMonth: 'ì´ë²ˆ ë‹¬', lastMonth: 'ì§€ë‚œ ë‹¬',
                staffStatisticsTitle: 'ì§ì›ë³„ í†µê³„', paymentMethodStatisticsTitle: 'ì…ê¸ˆë°©ì‹ë³„ í†µê³„', paymentMethodColumn: 'ì…ê¸ˆë°©ì‹', amountColumn: 'ê¸ˆì•¡', grandTotal: 'ì´ ê¸ˆì•¡(QRíŒ ì œì™¸)', grandTotalCommission: 'ì´ ì»¤ë¯¸ì…˜', profit: 'ìˆ˜ìµ',
                vacationStatus: 'íœ´ê°€',
                // Management specific
                add: 'ì¶”ê°€', save: 'ì €ì¥', update: 'ì—…ë°ì´íŠ¸', newStaff: 'ìƒˆ ì§ì›', phone: 'ì „í™”ë²ˆí˜¸', bank: 'ì€í–‰', account: 'ê³„ì¢Œë²ˆí˜¸',
                menuName: 'ë©”ë‰´ ì´ë¦„', priceTime: 'ê°€ê²©/ì»¤ë¯¸ì…˜', durationTime: 'ì‹œê°„',
                roomNumberLabel: 'ë°© ë²ˆí˜¸', capacity: 'ìˆ˜ìš© ì¸ì›',
                currencySymbol: 'í™”í ê¸°í˜¸', currencyName: 'í™”í ì´ë¦„',
                paymentMethodName: 'ì…ê¸ˆë°©ì‹ ì´ë¦„',
                guaranteeName: 'ë³´ì¥ ì´ë¦„', guaranteeAmount: 'ë³´ì¥ ê¸ˆì•¡', guaranteeDescription: 'ì„¤ëª…',
                adminRole: 'ê¶Œí•œ', shopId: 'ìƒµ ID', adminName: 'ê´€ë¦¬ìëª…', adminEmail: 'ì´ë©”ì¼',
                // Errors/Notifications
                requiredFields: 'í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                dbError: 'DB ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.',
                deleted: 'ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',
                saved: 'ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
                updated: 'ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.',
            },
            en: { title: 'Massage Shop Management', login: 'Login', payment: 'Payment', confirm: 'Confirm', cancel: 'Cancel', close: 'Close', staff: 'Staff', menu: 'Menu', price: 'Price', commission: 'Comm', duration: 'Time', languageSelection: 'Language Selection' },
            th: { title: 'à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¹‰à¸²à¸™à¸™à¸§à¸”', login: 'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š', payment: 'à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™', confirm: 'à¸¢à¸·à¸™à¸¢à¸±à¸™', cancel: 'à¸¢à¸à¹€à¸¥à¸´à¸', close: 'à¸›à¸´à¸”', staff: 'à¸à¸™à¸±à¸à¸‡à¸²à¸™', menu: 'à¹€à¸¡à¸™à¸¹', price: 'à¸£à¸²à¸„à¸²', commission: 'à¸„à¹ˆà¸²à¸™à¸²à¸¢à¸«à¸™à¹‰à¸²', duration: 'à¹€à¸§à¸¥à¸²', languageSelection: 'à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸©à¸²' },
            vi: { title: 'Há»‡ thá»‘ng Quáº£n lÃ½ Massage', login: 'ÄÄƒng nháº­p', payment: 'Thanh toÃ¡n', confirm: 'XÃ¡c nháº­n', cancel: 'Há»§y', close: 'ÄÃ³ng', staff: 'NhÃ¢n viÃªn', menu: 'Thá»±c Ä‘Æ¡n', price: 'GiÃ¡', commission: 'Hoa há»“ng', duration: 'Thá»i gian', languageSelection: 'Lá»±a chá»n ngÃ´n ngá»¯' },
        };
        translations = defaultTranslations; // ì¼ë‹¨ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •

        // =========================================================================
        // 3. Supabase DB CRUD í•¨ìˆ˜ (V9.0 ê¸°ë°˜)
        // =========================================================================

        async function getData(tableName) { /* ... */ return []; }
        async function getStaffData() { /* ... */ return []; }
        async function getMenusData() { /* ... */ return []; }
        async function getRoomsData() { /* ... */ return []; }
        async function getReservationsData(date) { /* ... */ return []; }
        async function getPaymentMethodsData() { /* ... */ return []; }
        async function getGuaranteeData() { /* ... */ return []; }
        async function getAdminData() { /* ... */ return []; }
        async function upsertData(tableName, data, id = null) { /* ... */ return null; }
        async function deleteData(tableName, id) { /* ... */ return true; }
        async function saveNewReservations(reservationsArray) { /* ... */ return null; }
        async function deleteReservationFromDB(id) { /* ... */ return true; }
        async function updateReservationInDB(id, updateData) { /* ... */ return null; }
        
        /** V11.0: DBì—ì„œ ì–¸ì–´ ë°ì´í„° ë¡œë“œ */
        async function loadLanguageSettings() {
            const { data, error } = await supabaseClient.from('shop_config')
                .select('config_value')
                .eq('shop_id', 'global') // ì–¸ì–´ ë°ì´í„°ëŠ” Global scopeë¡œ ê´€ë¦¬ ê°€ì •
                .eq('config_key', 'translations')
                .single();
            
            if (error && error.code !== 'PGRST116') {
                 console.warn('Error fetching custom translations. Using defaults:', error.message);
                 translations = defaultTranslations;
            } else if (data && data.config_value) {
                // DBì—ì„œ ë¡œë“œëœ JSONì„ ê¸°ì¡´ ê¸°ë³¸ê°’ê³¼ ë³‘í•©í•˜ê±°ë‚˜ ëŒ€ì²´
                translations = data.config_value;
                if (!translations.ko) translations.ko = defaultTranslations.ko;
                if (!translations.en) translations.en = defaultTranslations.en;
                if (!translations.th) translations.th = defaultTranslations.th;
                if (!translations.vi) translations.vi = defaultTranslations.vi;
            }
        }
        
        /** V11.0: í˜„ì¬ ì–¸ì–´ë¥¼ DBì— ì €ì¥ */
        async function saveCurrentLanguageSetting(lang) {
            const data = { config_value: { lang: lang }, config_key: 'language_setting' };
            const { error } = await supabaseClient.from('shop_config')
                .upsert({ shop_id: currentAdmin.shopId, config_key: 'language_setting', config_value: { lang: lang } }, { onConflict: 'shop_id, config_key' });
            
            if (error) {
                console.error('Error saving language setting:', error.message);
            }
        }
        
        /** V11.0: DBì—ì„œ í˜„ì¬ ì–¸ì–´ ì„¤ì • ë¡œë“œ */
        async function loadCurrentLanguageSetting() {
            const { data, error } = await supabaseClient.from('shop_config')
                .select('config_value')
                .eq('shop_id', currentAdmin.shopId)
                .eq('config_key', 'language_setting')
                .single();
            
            if (data && data.config_value && data.config_value.lang) {
                currentLanguage = data.config_value.lang;
            } else {
                 currentLanguage = 'ko';
            }
        }

        async function loadCurrencySettings() {
             const { data, error } = await supabaseClient.from('shop_config')
                .select('config_value')
                .eq('shop_id', currentAdmin.shopId)
                .eq('config_key', 'currency')
                .single();
            
            if (error && error.code !== 'PGRST116') {
                 console.error('Error fetching currency:', error.message);
            }
            if (data && data.config_value) {
                currency = data.config_value;
            }
            updateCurrencyDisplay();
        }


        // =========================================================================
        // 4. ì´ˆê¸°í™” ë° ì¸ì¦ ë¡œì§ (V11.0: ì–¸ì–´ ë¡œë“œ ìˆœì„œ ë³€ê²½)
        // =========================================================================
        
        async function loadAdminDetails(userId) { /* ... */ return { role: ADMIN_ROLES.SUPER_USER, shopId: 'super', shopName: 'ì‹œìŠ¤í…œ ì „ì²´ ê´€ë¦¬ (ê°•ì œ)' }; }
        
        async function initializeApp() {
            try {
                // ğŸš¨ V11.0: ì–¸ì–´ ì„¤ì • ê´€ë ¨ ë¡œì§ì„ ì¸ì¦ ì „ì— ë¡œë“œ
                await loadLanguageSettings(); 
                
                updateCurrentTime();
                setInterval(updateCurrentTime, 1000);
                
                const currentDateElement = document.getElementById('currentDate');
                if (currentDateElement) {
                    currentDateElement.value = new Date().toISOString().split('T')[0];
                }
                
                const { data: { session } } = await supabaseClient.auth.getSession();

                if (session) {
                    const adminDetails = await loadAdminDetails(session.user.id);
                    
                    currentAdmin.id = session.user.id;
                    currentAdmin.username = session.user.email;
                    currentAdmin.type = adminDetails.role;
                    currentAdmin.shopId = adminDetails.shopId;
                    currentAdmin.shopName = adminDetails.shopName;
                    
                    await loadCurrentLanguageSetting(); // í˜„ì¬ ìœ ì €ì˜ ì €ì¥ëœ ì–¸ì–´ ì„¤ì • ë¡œë“œ
                    await loadCurrencySettings(); 

                    document.getElementById('loginScreen').style.display = 'none';
                    document.getElementById('mainScreen').style.display = 'block';
                    document.getElementById('shopName').textContent = currentAdmin.shopName;

                    console.log(`[AUTH CHECK] Role Forced: ${currentAdmin.type}, Shop ID: ${currentAdmin.shopId}`);
                    updateTranslations(); // ë¡œë“œëœ ì–¸ì–´ë¡œ UI ì—…ë°ì´íŠ¸
                    updateUIAccess(); 
                    loadReservationData();
                    showDashboard();
                } else {
                    updateTranslations(); // ë¡œê·¸ì¸ í™”ë©´ UI ì—…ë°ì´íŠ¸
                    document.getElementById('loginScreen').style.display = 'flex';
                    document.getElementById('mainScreen').style.display = 'none';
                }
            } catch (error) {
                console.error('ì•± ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
            }
        }

        async function processLogin() { /* ... */ } // V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€

        // =========================================================================
        // 5. ìœ í‹¸ë¦¬í‹° ë° UI ë¡œì§ (V11.0: ì–¸ì–´ ë³€ê²½, ì˜ˆì•½ ë‹¨ê³„ ë³´ì™„)
        // =========================================================================

        function updateTranslations() {
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    el.textContent = translations[currentLanguage][key];
                }
            });
            document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                const key = el.getAttribute('data-translate-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    el.placeholder = translations[currentLanguage][key];
                }
            });
            // íŠ¹ìˆ˜ ë¬¸ì (ì˜ˆ: 'ì„ íƒëœ ì§ì›:')ëŠ” ë³„ë„ ì²˜ë¦¬ í•„ìš” ì‹œ ì—¬ê¸°ì— ì¶”ê°€
            // ì˜ˆì•½ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (ì˜ˆì•½ í™”ë©´ì´ ë¡œë“œëœ ê²½ìš°)
             if (document.getElementById('selectedStaffName')) {
                const staffName = document.getElementById('selectedStaffName').textContent;
                document.getElementById('selectedStaffName').textContent = staffName; // í…ìŠ¤íŠ¸ ìœ ì§€í•˜ë©´ì„œ ë²ˆì—­ ì ìš© ìœ ë„
            }
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            updateTranslations();
        }
        
        async function setLanguageAndClose(lang) {
            setLanguage(lang);
            // ğŸš¨ V11.0: DBì— ì–¸ì–´ ì„¤ì • ì €ì¥ í›„ ìƒˆë¡œê³ ì¹¨ (ì¦‰ì‹œ ì ìš©)
            await saveCurrentLanguageSetting(lang);
            location.reload(); 
        }

        function showLanguageModal() {
            // V11.0: ëª¨ë‹¬ ì—´ê¸° ì‹œ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('languageModal').style.display = 'block';
            document.querySelectorAll('#languageModal button').forEach(button => {
                button.classList.remove('bg-blue-500', 'text-white');
                button.classList.add('bg-gray-300', 'text-gray-700');
            });
            const currentLangButton = document.getElementById(`lang${currentLanguage.charAt(0).toUpperCase() + currentLanguage.slice(1)}`);
             if (currentLangButton) {
                currentLangButton.classList.add('bg-blue-500', 'text-white');
                currentLangButton.classList.remove('bg-gray-300', 'text-gray-700');
            }
        }
        function closeLanguageModal() {
            document.getElementById('languageModal').style.display = 'none';
        }


        // ... (V10.1ì˜ ë‚˜ë¨¸ì§€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ìœ ì§€) ...
        
        // =========================================================================
        // 6. ì˜ˆì•½ ë° ëŒ€ì‹œë³´ë“œ ë¡œì§ (V11.0: ì˜ˆì•½ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ë¡œì§ ì™„ì„±)
        // =========================================================================
        
        async function loadStaffSelection() { /* ... */ } // V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€
        async function loadStaffOrder() { /* ... */ } // V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€
        async function saveStaffOrder() { /* ... */ } // V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€
        async function loadDashboard() { /* ... */ } // V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€

        function selectStaff(id, name, order, element) {
            if (selectedStaff && selectedStaff.id === id) { changeStaff(); return; }

            document.querySelectorAll('.selection-item').forEach(item => { item.classList.remove('selected'); });
            element.classList.add('selected');

            selectedStaff = { id, name, order };
            document.getElementById('selectedStaffName').textContent = name;
            document.getElementById('selectedStaffOrder').textContent = order;
            
            document.getElementById('staffSelectionContainer').style.display = 'none';
            document.getElementById('selectedStaffInfo').style.display = 'block';
            document.getElementById('menuListContainer').style.display = 'block';

            menuRows = [];
            menuRowCounter = 0;
            document.getElementById('menuRows').innerHTML = '';
            addMenuRow(); 
            updateTotalSummary(); // ğŸš¨ V11.0: í˜¸ì¶œ ë³´ì¥
        }
        
        function changeStaff() { /* ... */ } // V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€

        // ğŸš¨ V11.0: ì˜ˆì•½ ì§„í–‰ì„ ìœ„í•œ í•µì‹¬ í•¨ìˆ˜ ì™„ì„±
        async function addMenuRow() {
            menuRowCounter++;
            const menus = await getMenusData();
            const rowId = menuRowCounter;
            
            const menuRow = { id: rowId, menuId: null, duration: 0, price: 0, commission: 0, isMulti: menuRows.length > 0 };
            menuRows.push(menuRow);

            const rowContainer = document.getElementById('menuRows');
            const newRowDiv = document.createElement('div');
            newRowDiv.id = `menuRow-${rowId}`;
            newRowDiv.className = 'menu-row';
            newRowDiv.innerHTML = `
                <div class="flex items-center space-x-3">
                    <button onclick="removeMenuRow(${rowId})" class="bg-red-500 text-white px-2 py-1 rounded text-sm">-</button>
                    <select id="menuSelect-${rowId}" class="flex-1 border rounded p-2" onchange="updateMenuData(${rowId}, this.value)">
                        <option value="">${translations[currentLanguage].selectMenu || 'ë©”ë‰´ ì„ íƒ'}</option>
                        ${menus.map(m => `<option value="${m.id}" data-prices='${JSON.stringify(m.prices)}'>${m.name}</option>`).join('')}
                    </select>
                    <select id="durationSelect-${rowId}" class="w-24 border rounded p-2" onchange="updateMenuDuration(${rowId}, this.value)" disabled>
                        <option value="">${translations[currentLanguage].duration || 'ì‹œê°„'}</option>
                    </select>
                    <span id="priceDisplay-${rowId}" class="w-20 text-right">${0}${currency.symbol}</span>
                </div>
            `;
            rowContainer.appendChild(newRowDiv);
            updateTotalSummary();
        }

        function removeMenuRow(rowId) {
            menuRows = menuRows.filter(row => row.id !== rowId);
            const element = document.getElementById(`menuRow-${rowId}`);
            if (element) element.remove();
            
            // ë©€í‹° ë©”ë‰´ í”Œë˜ê·¸ ì¬ì„¤ì • (ì²« ë²ˆì§¸ ë©”ë‰´ëŠ” isMulti=false)
            if (menuRows.length > 0) menuRows[0].isMulti = false;

            updateTotalSummary();
        }

        function updateMenuData(rowId, menuId) {
            const menuIndex = menuRows.findIndex(row => row.id === rowId);
            if (menuIndex === -1) return;

            const menuSelect = document.getElementById(`menuSelect-${rowId}`);
            const durationSelect = document.getElementById(`durationSelect-${rowId}`);
            const selectedOption = menuSelect.options[menuSelect.selectedIndex];
            
            const prices = selectedOption.getAttribute('data-prices') ? JSON.parse(selectedOption.getAttribute('data-prices')) : {};
            
            menuRows[menuIndex].menuId = parseInt(menuId) || null;
            menuRows[menuIndex].pricesData = prices;
            
            durationSelect.innerHTML = `<option value="">${translations[currentLanguage].duration || 'ì‹œê°„'}</option>`;
            durationSelect.disabled = true;
            
            if (menuId) {
                Object.keys(prices).sort((a, b) => a - b).forEach(duration => {
                    durationSelect.innerHTML += `<option value="${duration}">${duration} min</option>`;
                });
                durationSelect.disabled = false;
            }

            // ë©”ë‰´ê°€ ë°”ë€Œë©´ ê°€ê²© ì´ˆê¸°í™”
            menuRows[menuIndex].duration = 0;
            menuRows[menuIndex].price = 0;
            menuRows[menuIndex].commission = 0;
            document.getElementById(`priceDisplay-${rowId}`).textContent = `${0}${currency.symbol}`;
            updateTotalSummary();
        }

        function updateMenuDuration(rowId, duration) {
             const menuIndex = menuRows.findIndex(row => row.id === rowId);
             if (menuIndex === -1) return;

             const dur = parseInt(duration) || 0;
             menuRows[menuIndex].duration = dur;
             
             const prices = menuRows[menuIndex].pricesData || {};
             const priceInfo = prices[dur] || { price: 0, commission: 0 };
             
             menuRows[menuIndex].price = priceInfo.price;
             menuRows[menuIndex].commission = priceInfo.commission;
             
             document.getElementById(`priceDisplay-${rowId}`).textContent = `${priceInfo.price.toLocaleString()}${currency.symbol}`;
             updateTotalSummary();
        }

        function updateTotalSummary() {
            let totalP = 0;
            let totalC = 0;
            menuRows.forEach(row => {
                totalP += row.price;
                totalC += row.commission;
            });
            document.getElementById('totalPrice').textContent = totalP.toLocaleString();
            document.getElementById('totalCommission').textContent = totalC.toLocaleString();
        }


        // =========================================================================
        // 7. DB ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ (V11.0: ë©”ë‰´ UI, Guarantee ë‚ ì§œ, ê´€ë¦¬ì ì €ì¥ ìˆ˜ì •)
        // =========================================================================
        
        // --- Menu Management (UI ê¹¨ì§ ìˆ˜ì •) ---
        async function editMenu(id = null) {
            const menus = await getMenusData();
            const menu = id ? menus.find(m => m.id === id) : { prices: {} };
            openManagementModal(id ? translations[currentLanguage].edit : 'ìƒˆ ë©”ë‰´');
            const durations = [30, 60, 90, 120];

            // ğŸš¨ V11.0: UI ê¹¨ì§ ìˆ˜ì • (w-full í´ë˜ìŠ¤ë¥¼ flex-1ë¡œ ë³€ê²½í•˜ì—¬ Grid/Flex ë‚´ì—ì„œ ê³µê°„ ì°¨ì§€í•˜ë„ë¡ ìˆ˜ì •)
            let priceInputs = durations.map(d => {
                const priceData = menu.prices[d] || { price: '', commission: '' };
                const checked = menu.prices[d] !== undefined;
                return `
                    <div class="flex items-center space-x-2 p-2 border rounded bg-white">
                        <input type="checkbox" id="duration_${d}" value="${d}" ${checked ? 'checked' : ''} onchange="togglePriceInput(${d})" class="w-5 h-5">
                        <label for="duration_${d}" class="flex-shrink-0 w-12">${d}ë¶„</label>
                        <input type="number" id="price_${d}" placeholder="ê°€ê²©" value="${priceData.price}" class="flex-1 border rounded p-1 text-sm text-right" ${checked ? '' : 'disabled'}>
                        <input type="number" id="commission_${d}" placeholder="ì»¤ë¯¸ì…˜" value="${priceData.commission}" class="flex-1 border rounded p-1 text-sm text-right" ${checked ? '' : 'disabled'}>
                    </div>
                `;
            }).join('');

            document.getElementById('managementContent').innerHTML = `
                <input type="hidden" id="menuId" value="${id || ''}">
                <div class="space-y-3">
                    <div><label class="block">${translations[currentLanguage].menuName}*</label><input type="text" id="menuName" value="${menu.name || ''}" class="w-full border rounded p-2"></div>
                    <h4 class="font-bold mt-4">ì‹œê°„ë³„ ê°€ê²©/ì»¤ë¯¸ì…˜ ì„¤ì •</h4>
                    <div id="priceSettingGrid" class="grid grid-cols-1 md:grid-cols-2 gap-3 p-3 bg-gray-50 rounded">${priceInputs}</div>
                    <button onclick="saveMenu()" class="bg-blue-500 text-white px-4 py-2 rounded">${translations[currentLanguage].save}</button>
                </div>
            `;
            window.togglePriceInput = (duration) => {
                const checked = document.getElementById(`duration_${duration}`).checked;
                document.getElementById(`price_${duration}`).disabled = !checked;
                document.getElementById(`commission_${duration}`).disabled = !checked;
                if (!checked) {
                    document.getElementById(`price_${duration}`).value = '';
                    document.getElementById(`commission_${duration}`).value = '';
                }
            };
        }
        
        // --- Currency Management (V10.0 êµ¬í˜„ë¶€ ìœ ì§€) ---
        async function manageCurrency() {
            openManagementModal(translations[currentLanguage].currencyManagement);
            const shopIdInfo = currentAdmin.type === ADMIN_ROLES.SUPER_USER ? 'ì „ì²´ ìƒµ' : `${currentAdmin.shopId} ìƒµ`;
            let html = `<p class="p-3 mb-4 bg-gray-100 rounded">í˜„ì¬ ${shopIdInfo}ì˜ í™”í ë‹¨ìœ„ë§Œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>`;
            html += `<h4 class="font-bold mb-4">${translations[currentLanguage].update}</h4>`;
            html += `<div class="space-y-3">
                <div><label class="block">${translations[currentLanguage].currencySymbol}*</label><input type="text" id="currencySymbol" value="${currency.symbol || 'â‚©'}" class="w-full border rounded p-2"></div>
                <div><label class="block">${translations[currentLanguage].currencyName}*</label><input type="text" id="currencyName" value="${currency.name || 'ì›'}" class="w-full border rounded p-2"></div>
                <button onclick="saveCurrency()" class="bg-blue-500 text-white px-4 py-2 rounded">${translations[currentLanguage].save}</button>
            </div>`;
            document.getElementById('managementContent').innerHTML = html;
        }

        async function saveCurrency() {
            const symbol = document.getElementById('currencySymbol').value;
            const name = document.getElementById('currencyName').value;
            if (!symbol || !name) { alert(translations[currentLanguage].requiredFields); return; }

            const data = { config_value: { symbol, name }, config_key: 'currency' };
            const result = await upsertData('shop_config', data, null); 

            if (result) {
                currency = { symbol, name };
                updateCurrencyDisplay(); // ğŸš¨ V11.0: ì¦‰ì‹œ ë°˜ì˜
                alert(translations[currentLanguage].saved);
                manageCurrency();
            } else {
                 alert(translations[currentLanguage].dbError);
            }
        }
        
        // --- Guarantee Management (ì‹œì‘/ì¢…ë£Œì¼ ì¶”ê°€) ---
        async function manageGuarantee() {
             openManagementModal('Guarantee ê´€ë¦¬');
            const guarantees = await getGuaranteeData();
            const shopIdInfo = currentAdmin.type === ADMIN_ROLES.SUPER_USER ? 'ì „ì²´ ìƒµ' : `${currentAdmin.shopId} ìƒµ`;
             let html = `<p class="p-3 mb-4 bg-gray-100 rounded">í˜„ì¬ ${shopIdInfo}ì˜ ë³´ì¥ ê¸ˆì•¡ ëª©ë¡ì…ë‹ˆë‹¤. (ì •ì§ì›ì—ê²Œë§Œ ì ìš©ë©ë‹ˆë‹¤.)</p>`;
            html += `<button onclick="editGuarantee()" class="bg-green-500 text-white px-4 py-2 rounded mb-4">${translations[currentLanguage].add}</button>`;
            html += `<table class="w-full border-collapse border border-gray-300">
                <thead><tr><th class="border p-2">ID</th><th class="border p-2">${translations[currentLanguage].guaranteeName}</th><th class="border p-2">${translations[currentLanguage].guaranteeAmount}</th><th class="border p-2">ê¸°ê°„</th><th class="border p-2">${translations[currentLanguage].actions}</th></tr></thead><tbody>`;
            guarantees.forEach(g => {
                const period = g.start_date && g.end_date ? `${g.start_date} ~ ${g.end_date}` : 'ì˜êµ¬';
                html += `<tr><td class="border p-2">${g.id}</td><td class="border p-2">${g.name}</td><td class="border p-2">${(g.amount || 0).toLocaleString()}${currency.symbol}</td><td class="border p-2">${period}</td>
                    <td class="border p-2"><button onclick="editGuarantee(${g.id})" class="bg-blue-500 text-white px-2 py-1 rounded text-sm">${translations[currentLanguage].edit}</button> 
                    <button onclick="deleteManagementItem('guarantees', ${g.id}, manageGuarantee)" class="bg-red-500 text-white px-2 py-1 rounded text-sm">${translations[currentLanguage].delete}</button></td></tr>`;
            });
            html += `</tbody></table>`;
            document.getElementById('managementContent').innerHTML = html;
        }
        async function editGuarantee(id = null) {
            const guarantees = await getGuaranteeData();
            const guarantee = id ? guarantees.find(g => g.id === id) : {};
            openManagementModal(id ? translations[currentLanguage].edit : 'ìƒˆ Guarantee');
            document.getElementById('managementContent').innerHTML = `
                <input type="hidden" id="guaranteeId" value="${id || ''}">
                <div class="space-y-3">
                    <div><label class="block">${translations[currentLanguage].guaranteeName}*</label><input type="text" id="guaranteeName" value="${guarantee.name || ''}" class="w-full border rounded p-2"></div>
                    <div><label class="block">${translations[currentLanguage].guaranteeAmount}* (${currency.symbol})</label><input type="number" id="guaranteeAmount" value="${guarantee.amount || 0}" class="w-full border rounded p-2" min="0"></div>
                    <div><label class="block">ì ìš© ì‹œì‘ì¼ (ì„ íƒì‚¬í•­)</label><input type="date" id="guaranteeStartDate" value="${guarantee.start_date || ''}" class="w-full border rounded p-2"></div>
                    <div><label class="block">ì ìš© ì¢…ë£Œì¼ (ì„ íƒì‚¬í•­)</label><input type="date" id="guaranteeEndDate" value="${guarantee.end_date || ''}" class="w-full border rounded p-2"></div>
                    <div><label class="block">${translations[currentLanguage].guaranteeDescription}</label><textarea id="guaranteeDescription" class="w-full border rounded p-2">${guarantee.description || ''}</textarea></div>
                    <button onclick="saveGuarantee()" class="bg-blue-500 text-white px-4 py-2 rounded">${translations[currentLanguage].save}</button>
                </div>
            `;
        }
        async function saveGuarantee() {
            const id = document.getElementById('guaranteeId').value || null;
            const name = document.getElementById('guaranteeName').value;
            const amount = document.getElementById('guaranteeAmount').value;
            const description = document.getElementById('guaranteeDescription').value;
            const startDate = document.getElementById('guaranteeStartDate').value || null;
            const endDate = document.getElementById('guaranteeEndDate').value || null;
            
            if (!name || amount === '') { alert(translations[currentLanguage].requiredFields); return; }

            const data = { name, amount: parseInt(amount), description, start_date: startDate, end_date: endDate };
            const result = await upsertData('guarantees', data, id ? parseInt(id) : null);
            if (result) { alert(translations[currentLanguage].saved); manageGuarantee(); } else { alert(translations[currentLanguage].dbError); }
        }

        // --- Admin Management (ì €ì¥ ì˜¤ë¥˜ ìˆ˜ì •) ---
        async function saveNewAdmin() {
            const id = document.getElementById('adminUserId').value;
            const shopId = document.getElementById('adminShopId').value;
            const role = document.getElementById('adminRole').value;

            if (!id || !shopId || !role) { alert(translations[currentLanguage].requiredFields); return; }
            
            // ğŸš¨ V11.0: ê´€ë¦¬ì ì¶”ê°€ ì‹œ shopIdë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬ (currentAdmin.shopIdì™€ ë‹¬ë¼ë„ ì €ì¥ë˜ë„ë¡)
            const data = { id, shop_id: shopId, role }; 
            
            const { error } = await supabaseClient.from('shop_admins').upsert(data);
            
            if (error) { 
                alert(`ê´€ë¦¬ì ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì˜¤ë¥˜: ${error.message}`); 
                console.error(error);
                return;
            }
            alert(translations[currentLanguage].saved);
            manageAdmins();
        }

        // --- ê¸°íƒ€ DB ê´€ë¦¬ ë©”ë‰´ (V10.1 ê¸°ë°˜ ë¡œì§ ìœ ì§€) ---
        async function manageStaff() { /* ... */ }
        async function saveStaff() { /* ... */ }
        async function saveMenu() { /* ... */ }
        async function saveRoom() { /* ... */ }
        function manageCustomers() { /* ... */ }
        async function managePaymentMethods() { /* ... */ }
        async function editPaymentMethod(id = null) { /* ... */ }
        async function savePaymentMethod() { /* ... */ }
        async function manageAdmins() { /* ... */ }
        async function registerNewAdmin() { /* ... */ }


        // ì•± ì´ˆê¸°í™”
        initializeApp();
    </script>
 </body>
</html>
